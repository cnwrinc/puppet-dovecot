# File managed by puppet

<% if scope.lookupvar('dovecot::params::dovecot_ldap_host') -%>
host = <%= scope.lookupvar('dovecot::params::dovecot_ldap_host') %>
<% end -%>
<% if scope.lookupvar('dovecot::params::dovecot_ldap_uri') -%>
uris = <%= scope.lookupvar('dovecot::params::dovecot_ldap_uri') %>
<% end -%>
auth_bind = yes
<% if scope.lookupvar('dovecot::params::dovecot_ldap_bind_userdn') -%>
auth_bind_userdn = <%= scope.lookupvar('dovecot::params::dovecot_ldap_bind_userdn') %>
<% else -%>
auth_bind_userdn = uid=%u,ou=Users,dc=<%= scope.lookupvar('dovecot::params::slapd_domain') %>
<% end -%>
<% if scope.lookupvar('dovecot::params::slapd_allow_v2') -%>
ldap_version = 2
<% else -%>
ldap_version = 3
<% end -%>
<% if scope.lookupvar('dovecot::params::dovecot_ldap_base') -%>
base = <%= scope.lookupvar('dovecot::params::dovecot_ldap_base') %>
<% else -%>
base = ou=Users,dc=<%= scope.lookupvar('dovecot::params::slapd_domain') %>
<% end -%>
<% if scope.lookupvar('dovecot::params::dovecot_ldap_user_attrs') -%>
user_attrs = <%= scope.lookupvar('dovecot::params::dovecot_ldap_user_attrs') %>
<% else -%>
user_attrs = homeDirectory=home,uidNumber=uid,gidNumber=gid
<% end -%>
<% if scope.lookupvar('dovecot::params::dovecot_ldap_pass_attrs') -%>
pass_attrs = <%= scope.lookupvar('dovecot::params::dovecot_ldap_pass_attrs') %>
<% else -%>
pass_attrs = uid=user,userPassword=password,homeDirectory=userdb_home,uidNumber=userdb_uid,gidNumber=userdb_gid
<% end -%>
<% if scope.lookupvar('dovecot::params::dovecot_ldap_options') -%>
<%= scope.lookupvar('dovecot::params::dovecot_ldap_options') %>
<% end -%>
<% if scope.lookupvar('dovecot::params::dovecot_ldap_user_filter') -%>
user_filter = <%= scope.lookupvar('dovecot::params::dovecot_ldap_user_filter') %>
<% end -%>
<% if scope.lookupvar('dovecot::params::dovecot_ldap_pass_filter') -%>
pass_filter = <%= scope.lookupvar('dovecot::params::dovecot_ldap_pass_filter') %>
<% end -%>
